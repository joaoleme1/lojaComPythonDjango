{% extends "base.html" %}
{% block title %}{{ produto.nome }} — Produto{% endblock %}

{% block content %}
<div class="row g-4">
  <div class="col-md-5">
    <div class="border rounded p-2">
      {% if produto.imagem %}
        <img src="{{ produto.imagem.url }}" class="img-fluid" alt="{{ produto.nome }}">
      {% else %}
        <div class="bg-light d-flex align-items-center justify-content-center" style="height:320px;">
          <span class="text-muted">Sem imagem</span>
        </div>
      {% endif %}
    </div>
  </div>

  <div class="col-md-7">
    <h1 class="h3">{{ produto.nome }}</h1>
    <p class="text-muted mb-1">Categoria: {{ produto.categoria.nome }}</p>
    <p class="lead">R$ {{ produto.preco }}</p>
    <p>{{ produto.descricao|default:"Sem descrição." }}</p>

    <!-- form único dentro da coluna -->
    <form method="post" action="{% url 'adicionar_ao_carrinho' produto.id %}" class="mt-3">
      {% csrf_token %}
      <div class="input-group" style="max-width: 260px;">
        <input type="number" name="quantidade" class="form-control" value="1" min="1" step="1">
        <input type="hidden" name="next" value="{{ request.get_full_path }}">
        <button class="btn btn-primary" type="submit">Adicionar ao carrinho</button>
      </div>
    </form>

    <a href="{% url 'lista_produtos' %}" class="btn btn-outline-secondary mt-3">Voltar</a>
  </div>
</div>
{% endblock %}
